#!/usr/bin/with-contenv bashio

# Wait for Alertmanager to be ready
for _ in $(seq 1 30); do
    if curl -s "http://localhost:9093/-/ready" > /dev/null; then
        echo "Alertmanager is ready"
        exit 0
    fi
    sleep 0.5
done

echo "Alertmanager failed to become ready"
exit 1 